<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Explorer 2.0</title>

<style>
:root {
    --neon: #00f7ff;
    --bg: #0b0f1a;
    --panel: #131a2a;
}

* {
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    margin: 0;
    height: 100vh;
    display: flex;
    background: radial-gradient(circle at top, #141b33, #05070f);
    color: white;
}

/* SIDEBAR */
aside {
    width: 300px;
    background: var(--panel);
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    box-shadow: inset -1px 0 0 rgba(255,255,255,0.05);
}

h2 {
    margin: 0;
    color: var(--neon);
    text-shadow: 0 0 10px var(--neon);
}

input, textarea {
    background: #0b1020;
    border: 1px solid #1f2a4a;
    color: white;
    padding: 10px;
    border-radius: 8px;
}

button {
    background: transparent;
    border: 1px solid var(--neon);
    color: var(--neon);
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    background: var(--neon);
    color: black;
    box-shadow: 0 0 15px var(--neon);
}

/* ITEMS */
.item {
    padding: 8px;
    border-radius: 6px;
    margin-bottom: 6px;
    background: #0c1225;
    cursor: grab;
    transition: 0.2s;
}

.item:hover {
    background: #16204a;
    box-shadow: 0 0 10px rgba(0,247,255,0.4);
}

.folder {
    border-left: 3px solid #7c7cff;
}

.dragover {
    outline: 2px dashed var(--neon);
}

/* MAIN */
main {
    flex: 1;
    padding: 20px;
    display: flex;
    flex-direction: column;
}

textarea {
    flex: 1;
    resize: none;
}
</style>
</head>

<body>

<aside>
    <h2>Explorer 2.0</h2>

    <input id="search" placeholder="üîç Zoeken..." oninput="render()">

    <button onclick="newFolder()">üìÅ Nieuwe map</button>
    <button onclick="newDoc()">üìÑ Nieuw document</button>

    <div id="explorer"></div>
</aside>

<main>
    <input id="title" placeholder="Document titel">
    <textarea id="content" placeholder="Typ hier..."></textarea>

    <button onclick="saveDoc()">üíæ Opslaan</button>
    <button onclick="removeDoc()">üóë Naar prullenmand</button>
</main>

<script>
let currentId = null;

const load = k => JSON.parse(localStorage.getItem(k) || "[]");
const save = (k,v) => localStorage.setItem(k, JSON.stringify(v));

function newFolder() {
    const name = prompt("Map naam");
    if (!name) return;

    const folders = load("folders");
    folders.push({ id: crypto.randomUUID(), name });
    save("folders", folders);
    render();
}

function newDoc() {
    currentId = null;
    title.value = "";
    content.value = "";
}

function saveDoc() {
    const docs = load("docs");
    if (!title.value) return alert("Titel nodig");

    if (currentId) {
        const d = docs.find(d => d.id === currentId);
        d.title = title.value;
        d.content = content.value;
    } else {
        docs.push({
            id: crypto.randomUUID(),
            title: title.value,
            content: content.value,
            folderId: null
        });
    }
    save("docs", docs);
    render();
}

function openDoc(id) {
    const d = load("docs").find(d => d.id === id);
    currentId = id;
    title.value = d.title;
    content.value = d.content;
}

function removeDoc() {
    if (!currentId) return;
    let docs = load("docs");
    docs = docs.filter(d => d.id !== currentId);
    save("docs", docs);
    newDoc();
    render();
}

/* DRAG SYSTEM */
function drag(e, id) {
    e.dataTransfer.setData("id", id);
}

function drop(e, folderId) {
    e.preventDefault();
    const id = e.dataTransfer.getData("id");
    const docs = load("docs");
    const d = docs.find(d => d.id === id);
    d.folderId = folderId;
    save("docs", docs);
    render();
}

function render() {
    const explorer = document.getElementById("explorer");
    explorer.innerHTML = "";

    const query = search.value.toLowerCase();
    const folders = load("folders");
    const docs = load("docs");

    folders.forEach(f => {
        const div = document.createElement("div");
        div.className = "item folder";
        div.textContent = "üìÅ " + f.name;
        div.ondragover = e => e.preventDefault();
        div.ondrop = e => drop(e, f.id);
        explorer.appendChild(div);

        docs.filter(d => d.folderId === f.id && d.title.toLowerCase().includes(query))
            .forEach(d => {
                const doc = document.createElement("div");
                doc.className = "item";
                doc.textContent = "üìÑ " + d.title;
                doc.draggable = true;
                doc.ondragstart = e => drag(e, d.id);
                doc.onclick = () => openDoc(d.id);
                explorer.appendChild(doc);
            });
    });

    docs.filter(d => !d.folderId && d.title.toLowerCase().includes(query))
        .forEach(d => {
            const doc = document.createElement("div");
            doc.className = "item";
            doc.textContent = "üìÑ " + d.title;
            doc.draggable = true;
            doc.ondragstart = e => drag(e, d.id);
            doc.onclick = () => openDoc(d.id);
            explorer.appendChild(doc);
        });
}

render();
</script>

</body>
</html>
